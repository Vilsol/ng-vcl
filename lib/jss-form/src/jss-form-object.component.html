<div [formGroup]="form">
  <!-- <ng-container *ngIf="fo.schema.formControl !== 'object' && fo.schema.formControl !== 'array'">  -->
  <vcl-form-control-group >
    <ng-container [ngSwitch]="fo.formControl">
       <!-- input -->
      <ng-container *ngSwitchCase="'input'">
        <label *ngIf="!!fo.label" vclFormControlLabel>{{fo.label}}<vcl-required *ngIf="fo.required"></vcl-required></label>
        <input vclInput [placeholder]="fo.placeholder">
      </ng-container>
      <!-- textarea -->
      <ng-container *ngSwitchCase="'textarea'">
        <label *ngIf="!!fo.label" vclFormControlLabel>{{fo.label}}<vcl-required *ngIf="fo.required"></vcl-required></label>
        <textarea vclInput [formControlName]="fo.key" [placeholder]="fo.placeholder" [autogrow]="true" [minRows]="fo.minRows || 3" [maxRows]="fo.minRows || 10"></textarea>
      </ng-container>
      <!-- switch -->
      <ng-container *ngSwitchCase="'switch'">
        <label *ngIf="!!fo.label" vclFormControlLabel>{{fo.label}}<vcl-required *ngIf="fo.required"></vcl-required></label>
        <vcl-flip-switch [formControlName]="fo.key"></vcl-flip-switch>
      </ng-container>
      <!-- radio -->
      <ng-container *ngSwitchCase="'radio'">
        <label *ngIf="!!fo.label" vclFormControlLabel>{{fo.label}}<vcl-required *ngIf="fo.required"></vcl-required></label>
        <vcl-radio-group [formControlName]="fo.key">
          <label vclRadioButtonLabel *ngFor="let option of fo.options">
            <vcl-radio-button [value]="option.label"></vcl-radio-button>
            <vcl-icon vclAppend >{{option.label}}</vcl-icon>
          </label>
        </vcl-radio-group>
      </ng-container>
      <!--  button-group -->
      <ng-container *ngSwitchCase="'button-group'">
        <label *ngIf="!!fo.label" vclFormControlLabel>{{fo.label}}<vcl-required *ngIf="fo.required"></vcl-required></label>
        <vcl-button-group [formControlName]="fo.key">
          <button vcl-button [type]="button.schema.formControl" (click)="onAction(button.schema.action)"  *ngFor="let button of fo.buttons" >{{button.schema.label}}</button>
        </vcl-button-group>
      </ng-container>
      <!--  button -->
      <ng-container *ngSwitchCase="'button'">
        <button vcl-button [type]="fo.schema.formControl" (click)="onAction(fo.schema.action)" >{{fo.schema.label}}</button>
      </ng-container>
      <ng-container *ngSwitchCase="'checkbox'">
        <label vclCheckboxLabel>
          <vcl-checkbox [formControlName]="fo.key"></vcl-checkbox>
          {{fo.schema.label}}<vcl-required *ngIf="fo.required"></vcl-required>
        </label>
      </ng-container>
      <!--  dropdown -->
      <ng-container *ngSwitchCase="'dropdown'">
        <vcl-select [formControlName]="fo.key" [label]="fo.schema.label" [selectionMode]="fo.schema.selectionMode" >
          <vcl-dropdown>
            <vcl-dropdown-item *ngFor="let option of fo.options" [value]="option.value">
              <vcl-dropdown-label>{{option.label}}</vcl-dropdown-label>
              <vcl-dropdown-sublabel>{{option.sublabel}}</vcl-dropdown-sublabel>
            </vcl-dropdown-item>
          </vcl-dropdown>
        </vcl-select>
      </ng-container>
    </ng-container>
    <!--  hint -->
    <ng-container *ngFor="let hint of fo.schema.hints">
      <vcl-hint *ngIf="!hint.error" > {{ hint }}</vcl-hint>
      <vcl-hint-error error="required" > {{ hint.message }}</vcl-hint-error>
    </ng-container>
</vcl-form-control-group>

  <!-- </ng-container> -->


<!-- 
<ng-template #nested>
  <ng-container [ngSwitch]="fo.formControl">
    <ng-container *ngSwitchDefault>
      <fieldset class="vclFieldset" [ngStyle]="{'margin-top': '20px', 'margin-bottom': '20px', 'padding-top': fo.schema.hint ? '0.3em' : undefined}">
        <legend>{{fo.label}}</legend>
        <ng-container *ngIf="fo.schema.hint">
          <div class="vclFormControlHint">{{ fo.schema.hint }}</div>
        </ng-container>
        <ng-container *ngFor="let subFo of fo.formObjects">
          <vcl-jss-form-object [fo]="subFo" [form]="form.get(fo.key)"></vcl-jss-form-object>
        </ng-container>
      </fieldset>
    </ng-container>
    <ng-container *ngSwitchCase="'array'">
      <fieldset class="vclFieldset"
                [formArrayName]="fo.key"
                [ngStyle]="{'margin-top': '20px', 'margin-bottom': '20px', 'padding-top': fo.schema.hint ? '0.3em' : undefined}">
        <legend>{{fo.label}} <vcl-icon icon="fas fa-plus" (click)="addItem()" style="color: green"></vcl-icon></legend>
        <ng-container *ngIf="fo.schema.hint">
          <div class="vclFormControlHint">{{ fo.schema.hint }}</div>
        </ng-container>
        <ng-container *ngFor="let subArray of fo.formObjects; let i = index" [attr.data-index]="i">
          <ng-container [formGroupName]="i">
            <fieldset>
              <legend>{{fo.singularLabel}} <vcl-icon icon="fas fa-times" (click)="removeItem(i)" style="color: red"></vcl-icon></legend>
              <ng-container *ngFor="let subFo of subArray">
                <vcl-jss-form-object [fo]="subFo" [form]="getFormControl(fo.key, i)" [formComponent]="formComponent"></vcl-jss-form-object>
              </ng-container>
            </fieldset>
          </ng-container>
        </ng-container>
      </fieldset>
    </ng-container>
  </ng-container>
</ng-template> -->
  
</div>